<?xml version = "1.0" encoding = "utf-8"?>

<html>
	<head>
		<title> Drag and drop </title>
 		<link rel="stylesheet" type="text/css" href="./jigsaw.css" />
		<script type="text/javascript" src = "./jigsaw.js"></script>
		<script type="text/javascript">
			var imDirPaths, imageArray, imFileNames;

			function getImageNum(imStr) {
				var dotIdx = imStr.lastIndexOf(".");
				var imNum = imStr.charAt(dotIdx - 1);
				if(imNum == 0 || imNum == 1 || imNum == 2) {
					var tenPlace = imStr.charAt(dotIdx - 2);
					if(tenPlace == 1) {
						imNum = imNum + 10;
					}
				}
				return imNum;
			}	

			function getRandFileNames() {
				var randIdx = Math.random() * 3;
				randIdx = Math.floor(randIdx);
				var rplus = randIdx + 1;
				var randStr = rplus.toString();
				var imString = new String();
				for(var i = 0; i < 12; ++i) {
					var iSt = new String((i + 1));
					imString = imDirPaths[randIdx];
					imString += "img" + randStr + "-" + iSt + ".jpg";
					imFileNames[i] = imString;
				}
			}
		
			function createNewImage(imSrc) {
				var n = getImageNum(imSrc);
				var imId = "im_" + toString(n);
				var img = new Image();
				img.type = "image";
				img.id = imId;
				img.src = imSrc;
				
				var row = Math.floor((n / 4));
				var col = n % 4;

				var xCoord = 100 + col * 100;
				var yCoord = 100 + row * 100;
				img.width = 100;
				img.height = 100;
				img.style = "position: absolute; top:" + yCoord + "px; left:" + xCoord + "px;";
				img.onmousedown = "grabber(event);";
				img.onload = function() {
					document.body.appendChild( img );
				}	
				return img;
			}
			
			function loadImages() {
				getRandFileNames();
				for(var i = 0; i < 12; ++i) {
					imageArray[i] = createNewImage(imFileNames[i]);
				//	document.body.appendChild(imageArray[i]);
				}
			}

			function init() {
				imDirPaths = new Array(3);
				imDirPaths[0] = "./Images/images1/";
				imDirPaths[1] = "./Images/images2/";
				imDirPaths[2] = "./Images/images3/";
				
				imageArray = new Array(12);
				imFileNames = new Array(12);

				loadImages();
			}
		</script>
	</head>

	<body onload="init()">
		<p id="testArea">
			put stuff here
		</p>
		<div id="grid_area">
			<img style="position: absolute; top:100px; left:100px;" src="./Images/images1/puzzleback.gif" width="400" height="300" />
		</div>
	</body>
</html>
